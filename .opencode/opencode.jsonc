{
  "$schema": "https://opencode.ai/config.json",
  "model": "anthropic/claude-sonnet-4-20250514",
  "small_model": "anthropic/claude-haiku-4-20250514",

  "agent": {
    "build": {
      "mode": "primary",
      "description": "Converts approved plans into autocode task structure (directories + prompt files).",
      "prompt": "{file:./agent/build.md}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "plan_enter": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "mkdir *": "allow",
          "mv *": "allow",
          "ls *": "allow",
          "rm *": "allow",
          "*": "ask"
        }
      }
    },
    "autocode": {
      "mode": "primary",
      "description": "Autocode orchestrator. Manages the autocode build pipeline: finds next tasks, delegates to solve/test, handles retries, questions user on completion/failure.",
      "prompt": "{file:./agent/autocode.md}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "task": true,
        "question": true
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "*": "allow"
        },
        "task": {
          "solve": "allow",
          "test": "allow",
          "*": "deny"
        },
        "skill": {
          "plan-*": "allow"
        }
      }
    },
    "solve": {
      "mode": "subagent",
      "description": "Executes coding instructions. Makes file changes, installs dependencies, creates configs. Follows build.prompt.md instructions precisely.",
      "prompt": "{file:./agent/solve.md}",
      "model": "anthropic/claude-sonnet-4-20250514",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "task": false,
        "question": false
      },
      "permission": {
        "edit": "allow",
        "bash": {
          "*": "allow"
        }
      }
    }
  },

  "command": {
    "autocode-analyze": {
      "description": "Scan .autocode/analyze/ directory and start planning an idea",
      "agent": "build",
      "template": "{file:./command/autocode-analyze.md} $ARGUMENTS"
    },
    "autocode-resume": {
      "description": "Resume an interrupted autocode orchestration for a plan in .autocode/build/",
      "agent": "autocode",
      "template": "{file:./command/autocode-resume.md} $ARGUMENTS"
    },
    "autocode-review": {
      "description": "Review completed plans in .autocode/review/",
      "agent": "autocode",
      "template": "{file:./command/autocode-review.md} $ARGUMENTS"
    },
    "autocode-status": {
      "description": "Show status of all autocode stages",
      "agent": "autocode",
      "template": "{file:./command/autocode-status.md} $ARGUMENTS"
    },
    "autocode-abort": {
      "description": "Emergency abort: immediately stop all running autocode tasks for a plan",
      "agent": "autocode",
      "template": "{file:./command/autocode-abort.md} $ARGUMENTS"
    },
    "autocode-init": {
      "description": "Initialize the .autocode/ directory structure in the current project",
      "agent": "build",
      "template": "{file:./command/autocode-init.md} $ARGUMENTS"
    }
  },

  "permission": {
    "skill": {
      "plan-*": "allow"
    }
  }
}
